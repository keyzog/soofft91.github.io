{"version":3,"sources":["app.config.js","compontns/Navbar.jsx","compontns/AppHeader.jsx","compontns/pages/PageOptions.jsx","compontns/pages/PageEffects.jsx","helpers/color.js","compontns/ColorPalette/index.jsx","compontns/pages/PageColors.jsx","helpers/fetchWithTimeout.js","compontns/PopoverMenu/PopoverMenu.jsx","compontns/BaseUI/Toggle.jsx","compontns/pages/PageDevices.jsx","App.jsx","index.js"],"names":["config","n","i","ts","t","Navbar","props","items","sections","className","map","item","page","onClick","setPage","key","AppHeader","activeSection","useMemo","filter","arr","status","device","name","ping","PageOptions","useState","setName","url","setUrl","brightness","setBrightness","ip","setIp","type","value","onChange","target","Math","floor","min","max","v","tooltip","e_saveToEEPROM","e_sendName","PageEffects","effect","setEffect","speed","setSpeed","power","setPower","count","setCount","optIsShow","setOptIsShow","_effects","l","a","active","indexOf","effects","setEffects","answer","forEach","activeI","setActiveI","effectClick","newState","length","addActiveNum","ef","m","oldVal","class","rgbToHex","r","g","b","componentToHex","c","hex","toString","ColorPalette","hexColor","setHexColor","circle","useRef","level","result","exec","parseInt","hexToRgb","color","setColor","draging","setDraging","localStorage","rangeColor","setRangeColor","rangeOpacity","setRangeOpacity","useEffect","ss","colorStyle","_c","_op","backgroundColor","line","rotationHandler","event","el","p_x","pageX","touches","x2","current","getBoundingClientRect","x","endX","width","stopPropagation","preventDefault","ref","onMouseDown","onTouchStart","onMouseMove","onTouchMove","onMouseUp","onTouchCancel","onTouchEnd","style","left","PageColors","JSON","parse","favorites","setFavorites","stringify","gallery","setGalery","os","console","log","fav","options","timeout","Promise","race","fetch","_","reject","setTimeout","Error","PopoverMenu","isShow","li","cb","hide","clickHandler","text","Toggle","PageDevices","activeDevice","devices","addDevice","deleteDevice","setActiveDevice","online","setOnline","setOnlineForI","val","inputVal","setInputVal","setStatus","progress","setProgress","stopSearch","_worker","urlFull","fetchTimeout","cache","res","ok","json","_json","Object","assign","isOnline","showPopoverMenu","setShowPopoverMenu","popoverProps","holdTarget","holdTimeout","setHoldTimeout","setHoldTarget","holdStart","e","dataset","id","holdStop","clearTimeout","loop","dev","params","d","data-id","_id","checked","placeholder","Date","now","ws_opts","maxEnqueuedMessages","socket","ReconnectingWebSocket","setInterval","readyState","send","ping_arr","lastUpdate","App","setDevices","close","setPing","colorPageProps","data","join","effectOptsProps","onmessage","split","_data","_ping","push","splice","middle_value","reduce","pv","cv","onopen","onclose","wasClean","code","reason","onerror","error","message","oldState","devId","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.eff0d0c6.chunk.js","sourcesContent":["const config = {};\n\n/**\n * n = name\n * i = icon\n * t = title (full)\n * ts = short title\n */\nconfig.sections = [\n\t{ n: \"devices\", i: \"fa-th-large\", ts: \"Устройства\", t: \"Устройства\" },\n\t{ n: \"colors\", i: \"fa-palette\", ts: \"Упр. цветами\", t: \"Управление цветами\" },\n\t{ n: \"effects\", i: \"fa-fire\", ts: \"Эффекты\", t: \"Эффекты\" },\n\t{ n: \"options\", i: \"fa-cog\", ts: \"Настройки\", t: \"Настройки\" },\n];\n\nexport default config;\n","import React from \"react\";\nimport config from \"../app.config\";\n\nconst Navbar = (props) => {\n\tconst items = config.sections;\n\n\treturn (\n\t\t<div className=\"app-menu text-center\">\n\t\t\t<div className=\"row\">\n\t\t\t\t{items.map((item) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`col-3 app-menu-btn ${\n\t\t\t\t\t\t\tprops.page === item.n && \"active\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\tonClick={() => props.setPage(item.n)}\n\t\t\t\t\t\tkey={item.n}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className={\"fas \" + item.i} />\n\t\t\t\t\t\t<div>{item.ts}</div>\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Navbar;\n","import React, { useMemo } from \"react\";\nimport config from \"../app.config\";\n\nconst AppHeader = (props) => {\n\tconst { sections } = config;\n\tconst activeSection = useMemo(\n\t\t() => sections.filter((arr) => arr.n === props.page)[0],\n\t\t[sections, props.page]\n\t);\n\n\treturn (\n\t\t<div className=\"app-header d-flex align-items-center\">\n\t\t\t<div className=\"app-header-title\">\n\t\t\t\t{activeSection.t}\n\t\t\t\t{props.status === \"online\" && (\n\t\t\t\t\t<p className=\"text-success\">\n\t\t\t\t\t\t{props.device.name} <span className=\"text-secondary\">|</span>{\" \"}\n\t\t\t\t\t\t<span>ping: {props.ping}ms</span>\n\t\t\t\t\t</p>\n\t\t\t\t)}\n\t\t\t\t{props.status === \"offline\" && (\n\t\t\t\t\t<p className=\"text-danger\">{props.device.name}</p>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default AppHeader;\n","import React, { useState } from \"react\";\nimport Slider from \"react-rangeslider\";\n\nconst PageOptions = (props) => {\n\tconst [name, setName] = useState(props.device.name);\n\tconst { url, setUrl } = props;\n\tconst { brightness, setBrightness } = props;\n\n\tconst [ip, setIp] = useState(url);\n\tconst sendIp = () => setUrl(ip);\n\n\treturn (\n\t\t<div>\n\t\t\t<h5>Настройки приложения</h5>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label>Адресс устройства</label>\n\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\tvalue={ip}\n\t\t\t\t\t\tonChange={({ target }) => setIp(target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"input-group-append\">\n\t\t\t\t\t\t<button className=\"btn btn-warning\" onClick={sendIp}>\n\t\t\t\t\t\t\t<i className=\"fas fa-save\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<hr className=\"my-5\" />\n\n\t\t\t<h5>Настройки устройства</h5>\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<div className=\"d-flex\">\n\t\t\t\t\t<span>Яркость</span>\n\t\t\t\t\t<span className=\"ml-auto text-secondary\">\n\t\t\t\t\t\t{Math.floor((brightness / 255) * 100)}%\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<Slider\n\t\t\t\t\tmin={1}\n\t\t\t\t\tmax={255}\n\t\t\t\t\tvalue={brightness}\n\t\t\t\t\tonChange={(v) => setBrightness(v)}\n\t\t\t\t\ttooltip={false}\n\t\t\t\t/>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"btn btn-warning w-100\"\n\t\t\t\t\tonClick={props.e_saveToEEPROM}\n\t\t\t\t>\n\t\t\t\t\tЗапомнить яркость\n\t\t\t\t</button>\n\t\t\t</div>\n\n\t\t\t<div className=\"form-group\">\n\t\t\t\t<label>Название устройства</label>\n\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\tmax={10}\n\t\t\t\t\t\tonChange={({ target }) => setName(target.value)}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"input-group-append\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName=\"btn btn-warning\"\n\t\t\t\t\t\t\tonClick={() => props.e_sendName(name)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<i className=\"fas fa-save\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{/* \n\t\t\t<div className=\"form-group text-center\">\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"btn btn-warning w-100\"\n\t\t\t\t\tonClick={props.e_saveToEEPROM}\n\t\t\t\t>\n\t\t\t\t\tСохранить\n\t\t\t\t</button>\n\t\t\t\t<small className=\"text-secondary\">в энергонезависимой памяти</small>\n\t\t\t</div>\n\n\t\t\t<p className=\"text-secondary text-center\">\n\t\t\t\tВерсия приложения 0.1.1 <br />\n\t\t\t\tВерсия прошивки 0.1.0\n\t\t\t</p> */}\n\t\t</div>\n\t);\n};\n\nexport default PageOptions;\n","import React, { useState } from \"react\";\n\nimport Slider from \"react-rangeslider\";\n// import \"react-rangeslider/lib/index.css\";\n\nconst PageEffects = (props) => {\n\tconst { effect, setEffect } = props;\n\tconst { speed, setSpeed, power, setPower, count, setCount } = props;\n\n\tconst [optIsShow, setOptIsShow] = useState(false);\n\tconst optIsShowHandler = () => setOptIsShow((oldVal) => oldVal !== true);\n\n\tlet n = 0;\n\tlet _effects = [\n\t\t{ n: [n++], l: \"Выключено\" },\n\t\t{ n: [n++, n++, n++, n++], l: \"Радуга\", i: \"🌈\" },\n\t\t{ n: [n++, n++], l: \"Новогодняя гирлянда\", i: \"🎄\" },\n\t\t{ n: [n++], l: \"Стразы\", i: \"🤩\" },\n\t\t{ n: [n++, n++, n++], l: \"Волны\", i: \"🌊\" },\n\t\t{ n: [n++, n++], l: \"Пламя\", i: \"🔥\" },\n\t\t{ n: [0], l: \"Плавная смена цветов\", i: \"🎨\" },\n\t\t{ n: [0], l: \"Полиция\", i: \"👮‍♀️\" },\n\t\t{ n: [0], l: \"Феерверк\", i: \"💥\" },\n\t\t{ n: [0], l: \"Конфета\", i: \"🍭\" },\n\t\t{ n: [0], l: \"Бегающий огонек\", i: \"✨\" },\n\t\t{ n: [0], l: \"Светлячки\", i: \"💡\" },\n\t];\n\tconst [effects, setEffects] = useState(\n\t\t_effects.map((a) => {\n\t\t\ta.active = 0;\n\t\t\tif (a.n.indexOf(effect) !== -1) a.active = a.n.indexOf(effect);\n\t\t\treturn a;\n\t\t})\n\t);\n\tconst [activeI, setActiveI] = useState(() => {\n\t\tlet answer = 0;\n\t\t_effects.forEach((arr, i) => {\n\t\t\tif (arr.n.indexOf(effect) !== -1) answer = i;\n\t\t});\n\t\treturn answer;\n\t});\n\tconst addActiveNum = (i) => {\n\t\tconst newState = [...effects];\n\t\tif (activeI === i && newState[i].n.length > 1) {\n\t\t\tnewState[i].active += 1;\n\t\t\tif (newState[i].active >= effects[i].n.length) newState[i].active = 0;\n\t\t}\n\t\tsetEffects(newState);\n\t};\n\n\tconst effectClick = (i) => {\n\t\taddActiveNum(i);\n\t\tsetActiveI(i);\n\t\tconst answer = effects[i].n[effects[i].active];\n\t\tsetEffect(answer);\n\t};\n\n\treturn (\n\t\t<div className=\"row px-2 \">\n\t\t\t{effects.map((ef, i) => (\n\t\t\t\t<div className=\"col-6 col-sm-4 px-1\" key={ef.l}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`effect-btn d-flex align-items-center ${\n\t\t\t\t\t\t\tactiveI === i && \" active\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\tonClick={() => effectClick(i)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span>{ef.l}</span>\n\t\t\t\t\t\t{ef.i && <span className=\"icon\">{ef.i}</span>}\n\n\t\t\t\t\t\t{ef.n.length > 1 && (\n\t\t\t\t\t\t\t<div className=\"effect-types\">\n\t\t\t\t\t\t\t\t{ef.n.map((m, i) => (\n\t\t\t\t\t\t\t\t\t<span className={ef.active === i && \"active\"} />\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t))}\n\n\t\t\t<div className=\"effect-settings-btn\" onClick={optIsShowHandler}>\n\t\t\t\t<i class=\"fas fa-cog\"></i>\n\t\t\t\t{/* <i class=\"fas fa-angle-double-down\"></i> */}\n\t\t\t</div>\n\t\t\t{optIsShow === true && (\n\t\t\t\t<div className=\"effect-settings\">\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<div className=\"d-flex effect-settings-label\">\n\t\t\t\t\t\t\t<div className=\"mr-auto\">Скорость</div>\n\t\t\t\t\t\t\t<span className=\"badge badge-secondary\">{speed + 50}%</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\tmin={1}\n\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\tvalue={speed}\n\t\t\t\t\t\t\tonChange={(v) => setSpeed(v)}\n\t\t\t\t\t\t\ttooltip={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<div className=\"d-flex effect-settings-label\">\n\t\t\t\t\t\t\t<div className=\"mr-auto\">Интенсивность</div>\n\t\t\t\t\t\t\t<span className=\"badge badge-secondary\">{power}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\tvalue={power}\n\t\t\t\t\t\t\tonChange={(v) => setPower(v)}\n\t\t\t\t\t\t\ttooltip={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<div className=\"d-flex effect-settings-label\">\n\t\t\t\t\t\t\t<div className=\"mr-auto\">Кол-во</div>\n\t\t\t\t\t\t\t<span className=\"badge badge-secondary\">{count}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\tvalue={count}\n\t\t\t\t\t\t\tonChange={(v) => setCount(v)}\n\t\t\t\t\t\t\ttooltip={false}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nexport default PageEffects;\n","export const hexToRgb = (hex) => {\n\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\treturn result\n\t\t? [\n\t\t\t\tparseInt(result[1], 16),\n\t\t\t\tparseInt(result[2], 16),\n\t\t\t\tparseInt(result[3], 16),\n\t\t  ]\n\t\t: null;\n};\n\nexport const rgbToHex = (r, g, b) => {\n\tconst componentToHex = (c) => {\n\t\tconst hex = c.toString(16);\n\t\treturn hex.length === 1 ? \"0\" + hex : hex;\n\t};\n\treturn componentToHex(r) + componentToHex(g) + componentToHex(b);\n};\n","import React, { useState, useRef, useEffect, useMemo } from \"react\";\nimport \"./styles.scss\";\nimport { hexToRgb, rgbToHex } from \"../../helpers/color.js\";\n\n/**\n * TODO: сохранять положение ползунков\n * делать в глобал состаянии или высчитыввать по props.hexColor\n */\nconst ColorPalette = (props) => {\n\tconst { hexColor, setHexColor } = props;\n\n\tconst circle = useRef(null);\n\tconst level = useRef(null);\n\tconst [color, setColor] = useState(hexToRgb(hexColor));\n\tconst [draging, setDraging] = useState(0);\n\tconst [rangeColor, setRangeColor] = useState(() => {\n\t\tif (localStorage[\"rangeColor\"]) return localStorage[\"rangeColor\"];\n\t\treturn 500;\n\t});\n\tconst [rangeOpacity, setRangeOpacity] = useState(() => {\n\t\tif (localStorage[\"rangeOpacity\"]) return localStorage[\"rangeOpacity\"];\n\t\treturn 255;\n\t});\n\n\t// FIXME: костыль?\n\tuseEffect(() => {\n\t\tlocalStorage[\"rangeColor\"] = rangeColor;\n\t\tlocalStorage[\"rangeOpacity\"] = rangeOpacity;\n\t}, [rangeColor, rangeOpacity]);\n\n\tconst result = useMemo(() => {\n\t\tif (rangeOpacity >= 255)\n\t\t\treturn color.map((c) => Math.max(c, rangeOpacity - 255));\n\t\telse return color.map((c) => Math.min(c, rangeOpacity));\n\t}, [rangeOpacity, color]);\n\n\tuseEffect(() => {\n\t\tconst ss = rgbToHex(...result);\n\t\tsetHexColor(ss);\n\t}, [result, setHexColor]);\n\n\tconst colorStyle = useMemo(() => {\n\t\tlet _c = 0; // color\n\t\tlet _op = 0; // rangeOpacity\n\t\tif (rangeOpacity >= 255) {\n\t\t\t_c = 255;\n\t\t\t_op = (rangeOpacity - 255) / 255;\n\t\t} else {\n\t\t\t_c = 0;\n\t\t\t_op = (255 - rangeOpacity) / 255;\n\t\t}\n\t\treturn {\n\t\t\tbackgroundColor: `rgba(${_c},${_c},${_c},${_op})`,\n\t\t};\n\t}, [rangeOpacity]);\n\n\tconst calcColor = () => {\n\t\tconst line = Math.floor((1020 + 255 * 2) * (rangeColor / 1000));\n\t\tlet _c = { r: 0, g: 0, b: 0 };\n\n\t\tif (line < 255) {\n\t\t\t_c.r = 255;\n\t\t\t_c.g = line % 255;\n\t\t} else if (line < 255 * 2) {\n\t\t\t_c.r = 255 - (line % 255);\n\t\t\t_c.g = 255;\n\t\t} else if (line < 255 * 3) {\n\t\t\t_c.g = 255;\n\t\t\t_c.b = line % 255;\n\t\t} else if (line < 255 * 4) {\n\t\t\t_c.g = 255 - (line % 255);\n\t\t\t_c.b = 255;\n\t\t} else if (line < 255 * 5) {\n\t\t\t_c.r = line % 255;\n\t\t\t_c.b = 255;\n\t\t} else if (line < 255 * 6) {\n\t\t\t_c.r = 255;\n\t\t\t_c.b = 255 - (line % 255);\n\t\t}\n\t\tsetColor([_c.r, _c.g, _c.b]);\n\t};\n\n\tuseEffect(calcColor, [rangeColor]);\n\n\tconst rotationHandler = (event) => {\n\t\tif (!draging) return;\n\n\t\tlet p_x = event.pageX;\n\t\t// let p_y = event.pageY;\n\n\t\tif (event.touches && event.touches[0]) {\n\t\t\tp_x = event.touches[0].pageX;\n\t\t\t// p_y = event.touches[0].pageY;\n\t\t}\n\n\t\tlet el;\n\t\tif (draging === 2) el = level.current.getBoundingClientRect();\n\t\telse el = circle.current.getBoundingClientRect();\n\n\t\tlet x2 = p_x - el.x;\n\n\t\tconst endX = el.width;\n\t\tif (x2 < 0) x2 = 0;\n\t\tif (x2 >= endX) x2 = endX - 1;\n\n\t\tif (draging === 2) {\n\t\t\tconst a = (x2 / endX) * 510;\n\t\t\tsetRangeOpacity(Math.floor(a));\n\t\t} else {\n\t\t\tconst a = (x2 / endX) * 1000;\n\t\t\tsetRangeColor(Math.floor(a));\n\t\t}\n\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t};\n\n\treturn (\n\t\t<div className=\"palette1\">\n\t\t\t<div className=\"palette\">\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"palette-line-color\"\n\t\t\t\t\tref={circle}\n\t\t\t\t\tonMouseDown={() => setDraging(1)}\n\t\t\t\t\tonTouchStart={() => setDraging(1)}\n\t\t\t\t\tonMouseMove={rotationHandler}\n\t\t\t\t\tonTouchMove={rotationHandler}\n\t\t\t\t\tonMouseUp={() => setDraging(0)}\n\t\t\t\t\tonTouchCancel={() => setDraging(0)}\n\t\t\t\t\tonTouchEnd={() => setDraging(0)}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"before\" style={colorStyle}></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"palette-pointer\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tleft: `${Math.min(rangeColor / 10, 100)}%`,\n\t\t\t\t\t\t\tbackgroundColor: `rgb(${result[0]}, ${result[1]}, ${result[2]})`,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclassName=\"palette-line-level\"\n\t\t\t\tref={level}\n\t\t\t\tonMouseDown={() => setDraging(2)}\n\t\t\t\tonTouchStart={() => setDraging(2)}\n\t\t\t\tonMouseMove={rotationHandler}\n\t\t\t\tonTouchMove={rotationHandler}\n\t\t\t\tonMouseUp={() => setDraging(0)}\n\t\t\t\tonTouchCancel={() => setDraging(0)}\n\t\t\t\tonTouchEnd={() => setDraging(0)}\n\t\t\t\tstyle={{\n\t\t\t\t\tbackgroundColor: `rgb(${color[0]}, ${color[1]}, ${color[2]})`,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"palette-pointer\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tleft: `${Math.min((rangeOpacity / 510) * 100, 100)}%`,\n\t\t\t\t\t\tbackgroundColor: `rgb(${result[0]}, ${result[1]}, ${result[2]})`,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default ColorPalette;\n","import React, { useState } from \"react\";\nimport ColorPalette from \"../ColorPalette\";\nimport { useEffect } from \"react\";\n\nconst PageColors = (props) => {\n\tconst { hexColor, setHexColor } = props;\n\tconst [favorites, setFavorites] = useState(() => {\n\t\tif (localStorage[\"favorites\"]) return JSON.parse(localStorage[\"favorites\"]);\n\t\treturn [];\n\t});\n\tconst pushFavorite = () => setFavorites((os) => [...os, hexColor]);\n\tuseEffect(() => {\n\t\tlocalStorage[\"favorites\"] = JSON.stringify(favorites);\n\t}, [favorites]);\n\n\tconst { gallery, setGalery } = props;\n\tconst pushGallery = () =>\n\t\tsetGalery((os) => {\n\t\t\tif (os.length >= 6) {\n\t\t\t\tconsole.log(\"Максимум 6 цветов\");\n\t\t\t\treturn os;\n\t\t\t}\n\t\t\treturn [...os, hexColor];\n\t\t});\n\n\treturn (\n\t\t<div>\n\t\t\t<ColorPalette {...{ hexColor, setHexColor }} />\n\t\t\t<div className=\"my-4 row\">\n\t\t\t\t<div className=\"col-6\">\n\t\t\t\t\t<button className=\"btn btn-outline-dark w-100\" onClick={pushFavorite}>\n\t\t\t\t\t\tВ избранное\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"col-6\">\n\t\t\t\t\t<button className=\"btn btn-outline-dark w-100\" onClick={pushGallery}>\n\t\t\t\t\t\tВ галлерею\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<hr />\n\t\t\t<div className=\"color-card\">\n\t\t\t\t<div className=\"color-card-header d-flex\">\n\t\t\t\t\t<div>Цвета в избранном</div>\n\t\t\t\t\t<span className=\" ml-auto\">\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"badge badge-secondary\"\n\t\t\t\t\t\t\tonClick={() => setFavorites([])}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tочистить\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"row color-gal-row\">\n\t\t\t\t\t{favorites.map((fav, i) => (\n\t\t\t\t\t\t<div className=\"col-2 px-1 pb-2\" key={fav + \"s\" + i}>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"color-gal-col\"\n\t\t\t\t\t\t\t\tstyle={{ backgroundColor: \"#\" + fav }}\n\t\t\t\t\t\t\t\tonClick={() => setHexColor(fav)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div className=\"color-card\">\n\t\t\t\t<div className=\"color-card-header d-flex\">\n\t\t\t\t\t<div>Галлерея</div>\n\t\t\t\t\t<span className=\" ml-auto\">\n\t\t\t\t\t\t<span class=\"badge badge-secondary\">очистить</span>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"row color-gal-row\">\n\t\t\t\t\t{gallery.map((fav, i) => (\n\t\t\t\t\t\t<div className=\"col-2 px-1 pb-2\" key={fav + \"f\" + i}>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"color-gal-col\"\n\t\t\t\t\t\t\t\tstyle={{ backgroundColor: \"#\" + fav }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t))}\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{/* <h4>Галерея</h4> */}\n\t\t\t{/* <ul>\n\t\t\t\t<li>градиент</li>\n\t\t\t\t<li>волна</li>\n\t\t\t\t<li>волна из центра</li>\n\t\t\t</ul> */}\n\t\t</div>\n\t);\n};\n\nexport default PageColors;\n","export default function (url, options, timeout = 5000) {\n\treturn Promise.race([\n\t\tfetch(url, options),\n\t\tnew Promise((_, reject) =>\n\t\t\tsetTimeout(() => reject(new Error(\"timeout\")), timeout)\n\t\t),\n\t]);\n}\n","import React, { useState, useRef, useEffect, useMemo } from \"react\";\nimport \"./styles.scss\";\n\nconst PopoverMenu = (props) => {\n\tconst clickHandler = (i) => {\n\t\tprops.items[i].cb();\n\t\tprops.hide();\n\t};\n\n\tif (!props.isShow) return null;\n\treturn (\n\t\t<div className=\"popover-menu\">\n\t\t\t<div className=\"popover-menu-bg\" />\n\t\t\t<div className=\"popover-menu-body\">\n\t\t\t\t<ul>\n\t\t\t\t\t{props.items.map((li, i) => (\n\t\t\t\t\t\t<li onClick={() => clickHandler(i)}>{li.text}</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t\t<ul>\n\t\t\t\t\t<li onClick={props.hide}>Отмена</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default PopoverMenu;\n","import React from \"react\";\n\nimport \"./styles.scss\";\n\nconst Toggle = (props) => {\n\treturn (\n\t\t<span className=\"ui-toggle\">\n\t\t\t<i class=\"fas fa-toggle-off\"></i>\n\t\t</span>\n\t);\n};\n\nexport default Toggle;\n","import React, { useState, useEffect } from \"react\";\nimport fetchTimeout from \"../../helpers/fetchWithTimeout\";\nimport PopoverMenu from \"../PopoverMenu/PopoverMenu\";\nimport Toggle from \"../BaseUI/Toggle\";\n\nconst PageDevices = ({\n\tactiveDevice,\n\tdevices,\n\taddDevice,\n\tdeleteDevice,\n\tsetActiveDevice,\n}) => {\n\tconst [online, setOnline] = useState(() => devices.map(() => [2]));\n\tconst setOnlineForI = (i, val) =>\n\t\tsetOnline((oldVal) => {\n\t\t\tlet newState = [...oldVal];\n\t\t\tnewState[i] = val;\n\t\t\treturn newState;\n\t\t});\n\n\tconst [inputVal, setInputVal] = useState(\"191.168.1.69\");\n\tconst addDeviceFromInput = () => {\n\t\taddDevice({\n\t\t\ttype: \"ws_led_strip\",\n\t\t\tname: \"lol kek\",\n\t\t\t_id: \"test-\" + Date.now(),\n\t\t\turl: inputVal,\n\t\t});\n\t};\n\n\tconst maxAddress = 255;\n\tconst [status, setStatus] = useState(0); // 0 ниче, 1 идет поиск\n\tconst [progress, setProgress] = useState(0); // 0 ниче, 1 идет поиск\n\tconst progressPluse = () => setProgress((oldVal) => oldVal + 1);\n\n\tconst startSearch = () => {\n\t\tsetStatus(1);\n\t\tsetProgress(1);\n\t};\n\n\tconst stopSearch = () => {\n\t\tsetStatus(0);\n\t\tsetProgress(0);\n\t};\n\n\tuseEffect(() => {\n\t\tif (progress !== 0) setTimeout(_worker, 250);\n\t}, [progress]);\n\n\tconst _worker = async (n) => {\n\t\tconst url = `192.168.1.${progress}`;\n\t\tconst urlFull = `http://${url}/are_you_here`;\n\t\tconsole.log(\">>>>>>>>>> > > >\", url);\n\t\ttry {\n\t\t\tconst res = await fetchTimeout(urlFull, { cache: \"no-cache\" }, 1000);\n\t\t\tif (res.ok) {\n\t\t\t\tconst _json = await res.json();\n\n\t\t\t\taddDevice(\n\t\t\t\t\tObject.assign(_json, {\n\t\t\t\t\t\turl,\n\t\t\t\t\t\tisOnline: false,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\t// console.info(url, _json);\n\t\t} catch (err) {\n\t\t\t// console.log(url, \"💥\");\n\t\t}\n\t\tif (status === 1 && progress < 10) {\n\t\t\tprogressPluse();\n\t\t} else {\n\t\t\tstopSearch();\n\t\t}\n\t};\n\n\tconst [showPopoverMenu, setShowPopoverMenu] = useState(false);\n\tconst popoverProps = {\n\t\tisShow: showPopoverMenu,\n\t\thide: () => setShowPopoverMenu(false),\n\t\titems: [\n\t\t\t{\n\t\t\t\ttext: \"Удалить\",\n\t\t\t\tcb: () => {\n\t\t\t\t\tdeleteDevice(holdTarget);\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t};\n\tconst [holdTimeout, setHoldTimeout] = useState();\n\tconst [holdTarget, setHoldTarget] = useState();\n\tconst holdStart = (e) => {\n\t\tsetHoldTarget(e.target.dataset.id);\n\t\tconst ss = setTimeout(() => {\n\t\t\tsetShowPopoverMenu((oldVal) => oldVal === false);\n\t\t}, 500);\n\t\tsetHoldTimeout(ss);\n\t\te.preventDefault();\n\t};\n\tconst holdStop = (e) => clearTimeout(holdTimeout);\n\n\tuseEffect(() => {\n\t\tconst loop = async (i = 0) => {\n\t\t\tif (!devices[i]) return;\n\t\t\tconst dev = devices[i];\n\t\t\tconst url = `http://${dev.url}/are_you_here`;\n\t\t\tconst params = { cache: \"no-cache\" };\n\t\t\ttry {\n\t\t\t\tconst res = await fetchTimeout(url, params, 500);\n\t\t\t\tif (res.ok) setOnlineForI(i, 1);\n\t\t\t\telse throw \"e\";\n\t\t\t} catch (error) {\n\t\t\t\tsetOnlineForI(i, 0);\n\t\t\t}\n\t\t\tloop(++i);\n\t\t};\n\t\tloop();\n\t}, [devices]);\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"devices\">\n\t\t\t\t{devices.map((d, i) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`devices-btn d-flex align-items-center ${\n\t\t\t\t\t\t\tactiveDevice === i ? \"active\" : \"\"\n\t\t\t\t\t\t} status-${online[i]}`}\n\t\t\t\t\t\tdata-id={d._id}\n\t\t\t\t\t\tonMouseDown={holdStart}\n\t\t\t\t\t\tonMouseUp={holdStop}\n\t\t\t\t\t\tonTouchStart={(e) => {\n\t\t\t\t\t\t\tsetActiveDevice(i);\n\t\t\t\t\t\t\tholdStart(e);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonTouchEnd={holdStop}\n\t\t\t\t\t\tonClick={() => setActiveDevice(i)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"py-1 mr-auto\">\n\t\t\t\t\t\t\t<h6>{d.name}</h6>\n\t\t\t\t\t\t\t<small className=\"text-secondary\">\n\t\t\t\t\t\t\t\t{d.url}\n\t\t\t\t\t\t\t\t<div className=\"device-status\" />\n\t\t\t\t\t\t\t</small>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Toggle checked={true} />\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<div className=\"mt-4\">\n\t\t\t\t{status === 0 && (\n\t\t\t\t\t<button className=\"btn btn-secondary w-100\" onClick={startSearch}>\n\t\t\t\t\t\tПоиск устройств\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t\t{status === 1 && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<button className=\"btn btn-danger w-100\" onClick={stopSearch}>\n\t\t\t\t\t\t\tОстановить поиск\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<p className=\"text-secondary\">\n\t\t\t\t\t\t\tПроверено {progress} из {maxAddress}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t</div>\n\n\t\t\t<div className=\"my-5\">\n\t\t\t\t<div className=\"form-group mb-1\">\n\t\t\t\t\t<label>Адресс устройства</label>\n\t\t\t\t\t<div className=\"input-group\">\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\tvalue={inputVal}\n\t\t\t\t\t\t\tonChange={({ target }) => setInputVal(target.value)}\n\t\t\t\t\t\t\tplaceholder=\"192.168.1.1\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"input-group-append\">\n\t\t\t\t\t\t\t<button className=\"btn btn-warning\" onClick={addDeviceFromInput}>\n\t\t\t\t\t\t\t\t<i class=\"fas fa-plus    \"></i>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<p className=\"text-center\">\n\t\t\t\t\t<small>Ручное добавление устройств</small>\n\t\t\t\t</p>\n\t\t\t</div>\n\n\t\t\t<PopoverMenu {...popoverProps} />\n\t\t</div>\n\t);\n};\n\nexport default PageDevices;\n","import React, { useState, useEffect } from \"react\";\nimport ReconnectingWebSocket from \"reconnecting-websocket\";\n\nimport \"./App.css\";\nimport Navbar from \"./compontns/Navbar\";\nimport AppHeader from \"./compontns/AppHeader\";\nimport PageOptions from \"./compontns/pages/PageOptions\";\nimport PageEffects from \"./compontns/pages/PageEffects\";\nimport PageColors from \"./compontns/pages/PageColors\";\nimport PageDevices from \"./compontns/pages/PageDevices\";\nimport { useMemo } from \"react\";\n\nconst ws_opts = { maxEnqueuedMessages: 0 };\n// let socket = new ReconnectingWebSocket(\"ws://192.168.1.3:81\", [], ws_opts);\nlet socket = new ReconnectingWebSocket(\"ws://192.168.1.3:81\", [], ws_opts);\nconsole.log(\"sadasdasd\");\n\nsetInterval(() => {\n\t// console.log(socket.readyState);\n\tif (socket.readyState !== 1) return;\n\tsocket.send(\"p|\" + Date.now());\n}, 1000);\n\nlet ping_arr = [];\n\nlet lastUpdate = Date.now();\n\n/**\n * TODO:\n * сделать обработку ошибок в сокетах, чтобы ловить когда устройство теряет связь\n * https://medium.com/nuances-of-programming/%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%B2%D0%B5%D0%B1%D1%81%D0%BE%D0%BA%D0%B5%D1%82%D0%BE%D0%B2-%D0%B2-%D0%BF%D1%80%D0%BE%D0%BC%D0%B8%D1%81-%D1%81%D1%82%D0%B8%D0%BB%D0%B5-81055345ef7b\n */\n\nfunction App() {\n\t// let firstOpen = true;\n\t/**\n\t * ==========\n\t * ВСЯ ХЕРНЯ ДЛЯ ДЕВАЙСОВ\n\t * ==========\n\t */\n\tconst [devices, setDevices] = useState(() => {\n\t\tif (localStorage[\"devices\"]) return JSON.parse(localStorage[\"devices\"]);\n\t\treturn [];\n\t});\n\tconst addDevice = (data) =>\n\t\tsetDevices((oldState) => {\n\t\t\tconst alreadyHave = oldState.filter((arr) => arr._id === data._id);\n\t\t\tif (alreadyHave.length === 0) return [...oldState, data];\n\t\t\treturn oldState;\n\t\t});\n\tconst deleteDevice = (devId) => {\n\t\tsetDevices((oldVal) => oldVal.filter((arr) => arr._id !== devId));\n\t};\n\tuseEffect(() => {\n\t\tlocalStorage[\"devices\"] = JSON.stringify(devices);\n\t}, [devices]);\n\n\tconst [activeDevice, setActiveDevice] = useState(0);\n\tconst device = useMemo(() => {\n\t\tif (!devices[activeDevice]) setActiveDevice(0);\n\t\treturn devices[activeDevice];\n\t}, [devices, activeDevice]);\n\n\t// TODO: установка настроек для всех устройств отдельно\n\tuseEffect(() => {\n\t\tconst dev = devices[activeDevice];\n\t\tsetUrl(dev.url);\n\n\t\tsocket.close();\n\t\tsocket = new ReconnectingWebSocket(\"ws://\" + dev.url + \":81\", [], ws_opts);\n\t}, [activeDevice]);\n\n\t/**\n\t * ==========\n\t * ВСЯ ХЕРНЯ ДЛЯ ЦВЕТОВ\n\t * ==========\n\t */\n\n\tconst [status, setStatus] = useState(\"offline\");\n\tconst [ping, setPing] = useState(0);\n\tconst [page, setPage] = useState(\"devices\");\n\n\t// COLORS\n\tconst [hexColor, setHexColor] = useState(\"000000\");\n\tconst [gallery, setGalery] = useState([]);\n\tconst colorPageProps = { hexColor, setHexColor, gallery, setGalery };\n\n\t// COLORS  ->  effects\n\tuseEffect(() => {\n\t\tlet data = [\"000000\", \"000000\", \"000000\", \"000000\", \"000000\", \"000000\"];\n\t\tdata = data.map((d, i) => {\n\t\t\tif (gallery[i]) d = gallery[i];\n\t\t\treturn d;\n\t\t});\n\t\tconsole.log(`g|${data.join(\"\")}`);\n\t\tsocket.send(`g|${data.join(\"\")}`);\n\t}, [gallery]);\n\n\tconst [effect, setEffect] = useState(0);\n\tconst [speed, setSpeed] = useState(50);\n\tconst [power, setPower] = useState(50);\n\tconst [count, setCount] = useState(1);\n\tconst effectOptsProps = {\n\t\teffect,\n\t\tsetEffect,\n\t\tspeed,\n\t\tsetSpeed,\n\t\tpower,\n\t\tsetPower,\n\t\tcount,\n\t\tsetCount,\n\t};\n\tuseEffect(() => socket.send(`1|${power}`), [power]);\n\tuseEffect(() => socket.send(`2|${speed}`), [speed]);\n\tuseEffect(() => socket.send(`3|${count}`), [count]);\n\n\tuseEffect(() => {\n\t\tconst now = Date.now();\n\t\tif (now - lastUpdate <= 1000 / 60) return;\n\t\tlastUpdate = now;\n\t\tsocket.send(`c|${hexColor}`);\n\t}, [hexColor]);\n\n\tuseEffect(() => {\n\t\tconsole.log(`e|${effect}`);\n\t\tsocket.send(`e|${effect}`);\n\t}, [effect]);\n\n\t// настройки\n\tconst [url, setUrl] = useState(\"http://192.168.1.3\");\n\tconst [brightness, setBrightness] = useState(50);\n\n\tsocket.onmessage = function (event) {\n\t\t// console.log(\"Получены данные \" + event.data);\n\t\tconst [type, data] = event.data.split(\"|\");\n\n\t\tif (type === \"hi\") {\n\t\t\tconst _data = data.split(\"///\");\n\t\t\tsetBrightness(_data[1]);\n\t\t\tconsole.log(data);\n\t\t}\n\n\t\tif (event.data.indexOf(\"p|\") !== -1) {\n\t\t\tconst _ping = Date.now() - event.data.split(\"|\")[1];\n\n\t\t\tif (ping_arr.length < 5) ping_arr.push(_ping);\n\t\t\telse ping_arr = [...ping_arr.splice(1, 4), _ping];\n\n\t\t\tconst middle_value =\n\t\t\t\tping_arr.reduce((pv, cv) => pv + cv) / ping_arr.length;\n\n\t\t\tsetPing(Math.floor(middle_value));\n\t\t}\n\t};\n\n\tsocket.onopen = function () {\n\t\tconsole.log(\"Соединение установлено.\");\n\t\tsetStatus(\"online\");\n\t};\n\tsocket.onclose = function (event) {\n\t\tif (event.wasClean) {\n\t\t\tconsole.log(\"Соединение закрыто чисто\");\n\t\t} else {\n\t\t\tconsole.log(\"Обрыв соединения\"); // например, \"убит\" процесс сервера\n\t\t}\n\t\tconsole.log(\"Код: \" + event.code + \" причина: \" + event.reason);\n\n\t\tsetStatus(\"offline\");\n\t};\n\tsocket.onerror = function (error) {\n\t\tconsole.log(\"Ошибка \" + error.message);\n\t\tsetStatus(\"offline\");\n\t\t// socket.close();\n\t};\n\n\tuseEffect(() => {\n\t\tconsole.log(\"🏓\", `b|${brightness}`);\n\t\tsocket.send(`b|${brightness}`);\n\t}, [brightness]);\n\n\tconst e_sendName = (value = `device_${Date.now()}`) => {\n\t\tconsole.log(\"🏓\", \"N|\" + value);\n\t\tsocket.send(\"N|\" + value);\n\t};\n\tconst e_saveToEEPROM = () => {\n\t\tconsole.log(\"🏓\", \"e_saveToEEPROM()\");\n\t\t// socket.send(\"B|123\");\n\t};\n\n\t// useEffect(()=>{\n\t// \tif(page === 'devices') {\n\n\t// \t}\n\t// }, [page])\n\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<AppHeader {...{ page, device, ping, status }} />\n\t\t\t<Navbar {...{ setPage, page }} />\n\t\t\t{page === \"devices\" && (\n\t\t\t\t<PageDevices\n\t\t\t\t\t{...{\n\t\t\t\t\t\tactiveDevice,\n\t\t\t\t\t\tdevices,\n\t\t\t\t\t\taddDevice,\n\t\t\t\t\t\tdeleteDevice,\n\t\t\t\t\t\tsetActiveDevice,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{page === \"colors\" && <PageColors {...colorPageProps} />}\n\t\t\t{page === \"effects\" && <PageEffects {...effectOptsProps} />}\n\t\t\t{page === \"options\" && (\n\t\t\t\t<PageOptions\n\t\t\t\t\t{...{\n\t\t\t\t\t\tdevice,\n\t\t\t\t\t\turl,\n\t\t\t\t\t\tsetUrl,\n\t\t\t\t\t\tbrightness,\n\t\t\t\t\t\tsetBrightness,\n\t\t\t\t\t\te_sendName,\n\t\t\t\t\t\te_saveToEEPROM,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App.jsx\";\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// import * as serviceWorker from \"./serviceWorker\";\n// serviceWorker.register();\n"],"sourceRoot":""}